<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Speed Test Arcade</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-color: #1a1a2e;
      --container-bg-color: #2a2a44;
      --text-color: #e0e0e0;
      --primary-color: #4f46e5;
      --primary-hover-color: #4338ca; 
      --secondary-color: #8b5cf6;
      --secondary-hover-color: #7c3aed;
      --reaction-wait-color: #e74c3c;
      --reaction-go-color: #27ae60;
      --reaction-too-soon-color: #7f8c8d;
      --click-game-color: #f1c40f;
    }
    body {
      font-family: 'Inter', sans-serif;
      background-color: var(--bg-color);
      color: var(--text-color);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 1rem;
      box-sizing: border-box;
      /* Prevent mobile double-tap to zoom */
      touch-action: manipulation;
    }
    .container {
      width: 100%;
      max-width: 640px;
      background-color: var(--container-bg-color);
      border-radius: 1.5rem;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5), 0 10px 10px rgba(0, 0, 0, 0.4);
      padding: 2rem;
      text-align: center;
    }
    .header {
      font-size: 2.25rem;
      font-weight: bold;
      margin-bottom: 1.5rem;
      color: #818cf8;
    }
    .subtitle {
      margin-bottom: 1.5rem;
      color: #d1d5db;
    }
    .button-group {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-bottom: 2rem;
      justify-content: center;
      align-items: center;
    }
    .button {
      font-weight: bold;
      padding: 0.75rem 1.5rem;
      border-radius: 9999px;
      color: white;
      transition: all 0.3s ease-in-out;
      transform: scale(1);
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08);
      border: none;
      cursor: pointer;
    }
    .button:hover {
      transform: scale(1.05);
    }
    .button-primary {
      background-color: var(--primary-color);
    }
    .button-primary:hover {
      background-color: var(--primary-hover-color);
    }
    .button-secondary {
      background-color: var(--secondary-color);
    }
    .button-secondary:hover {
      background-color: var(--secondary-hover-color);
    }
    .game-title {
      font-size: 1.875rem;
      font-weight: bold;
      margin-bottom: 1rem;
    }
    .game-instructions {
      color: #9ca3af;
      margin-bottom: 1rem;
    }
    .game-area {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 300px;
      border-radius: 1rem;
      margin-top: 1.5rem;
      font-size: 2.5rem;
      font-weight: bold;
      transition: background-color 0.3s ease, transform 0.1s ease;
      cursor: pointer;
    }
    .game-area:active {
      transform: scale(0.98);
    }
    .game-area-text {
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); 
    }
    .reaction-wait { background-color: var(--reaction-wait-color); }
    .reaction-go { background-color: var(--reaction-go-color); }
    .reaction-too-soon { background-color: var(--reaction-too-soon-color); }
    .reaction-complete { background-color: var(--primary-color); }
    .click-area-color { background-color: var(--click-game-color); color: #000; }
    .game-results { 
      margin-top: 1rem;
      font-size: 1.5rem;
      font-weight: bold;
    }
    .hidden {
      display: none;
    }
    @media (min-width: 640px) {
      .button-group {
        flex-direction: row;
      }
      .button-small {
        padding: 0.5rem 1rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 class="header">Speed Test Arcade</h1>
    <p class="subtitle">Choose a game to test your skills:</p>
    
    <div class="button-group">
      <button id="reactionBtn" class="button button-primary">Reaction Speed</button>
      <button id="clickBtn" class="button button-primary">Click Speed</button>
    </div>
    <div id="reactionContainer" class="hidden">
      <h2 class="game-title">Reaction Speed Test</h2>
      <p id="reactionInstructions" class="game-instructions">Wait for the color to get green, then click as fast as you can!</p>
      <div id="reactionArea" class="game-area reaction-wait game-area-text">
        <span id="reactionText">Click to start</span>
      </div>
      <div id="reactionResults" class="game-results hidden"></div>
      <button id="reactionResetBtn" class="button button-secondary hidden">
        Play Again
      </button>
    </div>

    <div id="clickContainer" class="hidden">
      <h2 class="game-title">Click Speed Test</h2>
      <div class="button-group">
        <button id="timer5Btn" class="button button-small button-primary">5 Seconds</button>
        <button id="timer10Btn" class="button button-small button-primary">10 Seconds</button>
      </div>
      <p id="clickInstructions" class="game-instructions">Select a timer and click to start!</p>
      <div id="clickArea" class="game-area click-area-color">
        <div style="font-size: 2.25rem;" id="clickCount">0 Clicks</div>
        <div style="font-size: 1.5rem; margin-top: 0.5rem;" id="clickTimer"></div>
      </div>
      <div id="clickResults" class="game-results hidden"></div>
      <button id="clickResetBtn" class="button button-secondary hidden">
        Play Again
      </button>
    </div>
  </div>
<script>
  // --- Game Logic ---
  const reactionBtn = document.getElementById('reactionBtn');
  const clickBtn = document.getElementById('clickBtn');
  
  const reactionContainer = document.getElementById('reactionContainer');
  const clickContainer = document.getElementById('clickContainer');
  
  const reactionArea = document.getElementById('reactionArea');
  const reactionText = document.getElementById('reactionText');
  const reactionInstructions = document.getElementById('reactionInstructions');
  const reactionResults = document.getElementById('reactionResults');
  const reactionResetBtn = document.getElementById('reactionResetBtn');
  
  const timer5Btn = document.getElementById('timer5Btn');
  const timer10Btn = document.getElementById('timer10Btn');
  const clickArea = document.getElementById('clickArea');
  const clickCount = document.getElementById('clickCount');
  const clickTimer = document.getElementById('clickTimer');
  const clickInstructions = document.getElementById('clickInstructions');
  const clickResults = document.getElementById('clickResults');
  const clickResetBtn = document.getElementById('clickResetBtn');
  
  let reactionStartTime, reactionTimeout;
  let reactionGameRunning = false;
  let clickGameRunning = false, clickCountValue = 0, clickTimerInterval, totalClickTime = 0, isCooldownActive = false;
  
  // Function to switch game
  function showGame(gameName) {
    reactionContainer.classList.add('hidden');
    clickContainer.classList.add('hidden');
    
    if (gameName === 'reaction') {
      reactionContainer.classList.remove('hidden');
      reactionResetBtn.classList.add('hidden');
      resetReactionGame();
    } else if (gameName === 'click') {
      clickContainer.classList.remove('hidden');
      clickResetBtn.classList.add('hidden');
      resetClickGame(); 
    }
  }
  
  // Reaction speed game
  function startReactionGame() {
    reactionGameRunning = true;
    reactionArea.className = 'game-area reaction-wait game-area-text';
    reactionText.textContent = 'Wait for green...';
    reactionInstructions.textContent = 'Wait for the color to turn green, then click as fast as you can!';
    reactionResults.classList.add('hidden');
    reactionResetBtn.classList.add('hidden');
    
    const delay = Math.random() * 4000 + 1000;
    reactionTimeout = setTimeout(() => {
      reactionArea.className = 'game-area reaction-go game-area-text';
      reactionText.textContent = 'Click Now!';
      reactionStartTime = new Date().getTime();
    }, delay);
  }
  
  function handleReactionClick() {
    if (!reactionGameRunning) {
      startReactionGame();
      return;
    }
    
    if (reactionArea.classList.contains('reaction-wait')) {
      clearTimeout(reactionTimeout);
      reactionArea.className = 'game-area reaction-too-soon game-area-text';
      reactionText.textContent = 'Too Soon!';
      reactionInstructions.textContent = 'Click To Try Again.';
      reactionResetBtn.classList.remove('hidden');
      reactionGameRunning = false;
    } else if (reactionArea.classList.contains('reaction-go')) {
      const reactionEndTime = new Date().getTime();
      const reactionTime = reactionEndTime - reactionStartTime;
      
      reactionArea.className = 'game-area reaction-complete game-area-text';
      reactionText.textContent = '';
      reactionResults.textContent = `${reactionTime}ms`;
      reactionResults.classList.remove('hidden');
      reactionInstructions.textContent = 'Click To Play Again.';
      reactionResetBtn.classList.remove('hidden');
      reactionGameRunning = false;
    }
  }
  
  function resetReactionGame() {
    clearTimeout(reactionTimeout);
    reactionGameRunning = false;
    reactionArea.className = 'game-area reaction-wait game-area-text';
    reactionText.textContent = 'Click to start!';
    reactionInstructions.textContent = 'Wait for the color to turn green, then click as fast as you can!';
    reactionResults.classList.add('hidden');
    reactionResetBtn.classList.add('hidden');
  }
  
  // Click speed test
  function startClickGame() {
    if (clickGameRunning) return;
    
    clickGameRunning = true;
    clickCountValue = 0;
    
    clickInstructions.textContent = 'CLICK! CLICK! CLICK!';
    clickResults.classList.add('hidden');
    clickResetBtn.classList.add('hidden');
    updateClickDisplay();
    
    let timeLeft = totalClickTime;
    
    clickTimer.textContent = `${timeLeft.toFixed(1)}s`;
    
    clickTimerInterval = setInterval(() => {
      timeLeft -= 0.1; 
      if (timeLeft <= 0) {
        clearInterval(clickTimerInterval);
        endClickGame();
      }
      clickTimer.textContent = `${Math.max(0, timeLeft).toFixed(1)}s`;
    }, 100);
  }

  function handleClicks() {
    if (isCooldownActive) {
      return; // Do nothing during the cooldown period
    }
    if (!clickGameRunning && totalClickTime > 0) {
        startClickGame();
    }
    if (clickGameRunning) {
        clickCountValue++;
        updateClickDisplay();
    }
  }

  function updateClickDisplay() {
    clickCount.textContent = `${clickCountValue} Clicks`;
  }

  function endClickGame() {
    clickGameRunning = false;
    isCooldownActive = true; // Start the cooldown
    
    const cps = (clickCountValue / totalClickTime).toFixed(2);
    
    clickInstructions.textContent = 'Game Over!';
    clickResults.textContent = `Your final score is ${clickCountValue} clicks. That's ${cps} clicks/second!`;
    
    clickResults.classList.remove('hidden');

    // Show the reset button only after a 2-second cooldown
    setTimeout(() => {
        clickResetBtn.classList.remove('hidden');
        isCooldownActive = false; // End the cooldown
    }, 2000); // 2-second cooldown
  }

  function resetClickGame() {
    clearInterval(clickTimerInterval);
    clickGameRunning = false;
    clickCountValue = 0;
    isCooldownActive = false; // Reset cooldown state
    
    clickInstructions.textContent = 'Select a timer and click to start!';
    clickCount.textContent = '0 Clicks';
    if (totalClickTime > 0) {
      clickInstructions.textContent = 'Click the area below to start!';
    }
    clickTimer.textContent = totalClickTime > 0 ? `${totalClickTime.toFixed(1)}s` : '';
    clickResults.classList.add('hidden');
    clickResetBtn.classList.add('hidden');
  }
  
  reactionBtn.addEventListener('click', () => showGame('reaction'));
  clickBtn.addEventListener('click', () => showGame('click'));
  reactionArea.addEventListener('click', handleReactionClick);
  reactionResetBtn.addEventListener('click', resetReactionGame);
  
  // Use touchstart for mobile for better responsiveness
  clickArea.addEventListener('touchstart', handleClicks);
  // Keep the click event for desktop users
  clickArea.addEventListener('click', handleClicks);

  timer5Btn.addEventListener('click', () => {
    totalClickTime = 5;
    resetClickGame();
  });
  timer10Btn.addEventListener('click', () => {
    totalClickTime = 10;
    resetClickGame();
  });
  clickResetBtn.addEventListener('click', resetClickGame);

  showGame('reaction');
</script>
</body>
</html>